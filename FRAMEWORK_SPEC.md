# ТЗ

# Техническое задание: Фреймворк "MyOldSpace" (упрощённая версия)

## 1. Цель
Выделить ядро текущего проекта в отдельный NPM-пакет (например, my-old-space) для переиспользования и обновления через npm. Все изменения должны быть минимальными: не переименовывать файлы и папки, если это не требуется для работы.

## 2. Концепция
- **Фреймворк**: Вынести серверную логику, работу с БД, сессиями, глобальный контекст и системные приложения в отдельный пакет.
- **Проект-потребитель**: Содержит только конфигурацию, пользовательские приложения и точку входа.

## 3. Структура пакета
- Переносить существующие файлы и папки в пакет без переименования, если это не мешает работе require/import.
- Внутри пакета допускается использовать текущие имена файлов и папок.
- Если потребуется, только тогда переименовывать файлы/папки для устранения конфликтов или для корректной работы require.

## 4. Архитектурные изменения
- Экспортировать функцию start(options), которая принимает путь к корню проекта и настройки.
- Пути к конфигам и приложениям передавать через параметры или искать в корне проекта.
- Все внутренние require должны быть относительными внутри пакета.
- Сервер должен раздавать статику как из пакета, так и из проекта.

## 5. План реализации
1. Создать папку пакета (например, packages/my-old-space).
2. Перенести ядро, БД, менеджер приложений и встроенные приложения в пакет без переименования, если это возможно.
3. Обновить только те require, которые перестанут работать из-за изменения структуры.
4. Создать package.json для пакета.
5. В корне пакета создать index.js, который экспортирует:
   - start
   - globalContext
   - eventBus
   - SequelizeInstance
   - Utilities
6. В main_server.js использовать пакет и передавать все нужные параметры.
7. Протестировать работу и опубликовать пакет.

## 6. Структура конечного проекта
```
my-new-project/
├── package.json (dependencies: "my-old-space")
├── server.config.json
├── dbSettings.json
├── index.js (точка входа)
└── apps/ (опционально, для своих приложений)
```
